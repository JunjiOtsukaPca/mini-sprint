'use strict';

var headers = {
  'access-control-allow-origin': '*',
  'access-control-allow-methods': 'GET, POST, PUT, DELETE, OPTION',
  'access-control-allow-headers': 'content-type, accept',
  'access-control-max-age': 10,
  'content-type': 'application/json'
};

exports.sendResponse = function (response, data, statusCode) {
  statusCode = statusCode || 200;
  response.writeHead(statusCode, headers);
  console.log(data);
  response.end(JSON.stringify(data.results));
};

exports.collectData = function (request, callback) {
  var data = '';
  request.on('data', function (chunk) {
    data += chuck;
  });
  request.on('end', function () {
    callback(JSON.parse(data));
  });
};

// exports.redirectTo = function(request, response) {
//   console.log(response.redirect)
//   return response.redirect('/api/posts');
// }

exports.makeActionHandler = function (actionMap) {
  return function (request, response) {
    var action = actionMap[request.method];
    if (action) {
      action(request, response);
    } else {
      exports.sendResponse(response, '', 404);
    }
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci91dGlsLmpzIl0sIm5hbWVzIjpbImhlYWRlcnMiLCJleHBvcnRzIiwic2VuZFJlc3BvbnNlIiwicmVzcG9uc2UiLCJkYXRhIiwic3RhdHVzQ29kZSIsIndyaXRlSGVhZCIsImNvbnNvbGUiLCJsb2ciLCJlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0cyIsImNvbGxlY3REYXRhIiwicmVxdWVzdCIsImNhbGxiYWNrIiwib24iLCJjaHVuayIsImNodWNrIiwicGFyc2UiLCJtYWtlQWN0aW9uSGFuZGxlciIsImFjdGlvbk1hcCIsImFjdGlvbiIsIm1ldGhvZCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxVQUFVO0FBQ1osaUNBQStCLEdBRG5CO0FBRVosa0NBQWdDLGdDQUZwQjtBQUdaLGtDQUFnQyxzQkFIcEI7QUFJWiw0QkFBMEIsRUFKZDtBQUtaLGtCQUFnQjtBQUxKLENBQWQ7O0FBUUFDLFFBQVFDLFlBQVIsR0FBdUIsVUFBU0MsUUFBVCxFQUFtQkMsSUFBbkIsRUFBeUJDLFVBQXpCLEVBQXFDO0FBQzFEQSxlQUFhQSxjQUFjLEdBQTNCO0FBQ0FGLFdBQVNHLFNBQVQsQ0FBbUJELFVBQW5CLEVBQStCTCxPQUEvQjtBQUNBTyxVQUFRQyxHQUFSLENBQVlKLElBQVo7QUFDQUQsV0FBU00sR0FBVCxDQUFhQyxLQUFLQyxTQUFMLENBQWVQLEtBQUtRLE9BQXBCLENBQWI7QUFDRCxDQUxEOztBQU9BWCxRQUFRWSxXQUFSLEdBQXNCLFVBQVNDLE9BQVQsRUFBa0JDLFFBQWxCLEVBQTRCO0FBQ2hELE1BQUlYLE9BQU8sRUFBWDtBQUNBVSxVQUFRRSxFQUFSLENBQVcsTUFBWCxFQUFtQixVQUFTQyxLQUFULEVBQWU7QUFDaENiLFlBQVFjLEtBQVI7QUFDRCxHQUZEO0FBR0FKLFVBQVFFLEVBQVIsQ0FBVyxLQUFYLEVBQWtCLFlBQVU7QUFDMUJELGFBQVNMLEtBQUtTLEtBQUwsQ0FBV2YsSUFBWCxDQUFUO0FBQ0QsR0FGRDtBQUdELENBUkQ7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUFILFFBQVFtQixpQkFBUixHQUE0QixVQUFTQyxTQUFULEVBQW9CO0FBQzlDLFNBQU8sVUFBVVAsT0FBVixFQUFtQlgsUUFBbkIsRUFBNkI7QUFDbEMsUUFBSW1CLFNBQVNELFVBQVVQLFFBQVFTLE1BQWxCLENBQWI7QUFDQSxRQUFJRCxNQUFKLEVBQVk7QUFDVkEsYUFBT1IsT0FBUCxFQUFnQlgsUUFBaEI7QUFDRCxLQUZELE1BRU87QUFDTEYsY0FBUUMsWUFBUixDQUFxQkMsUUFBckIsRUFBK0IsRUFBL0IsRUFBbUMsR0FBbkM7QUFDRDtBQUNGLEdBUEQ7QUFRRCxDQVREIiwiZmlsZSI6InV0aWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaGVhZGVycyA9IHtcclxuICAnYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luJzogJyonLFxyXG4gICdhY2Nlc3MtY29udHJvbC1hbGxvdy1tZXRob2RzJzogJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTicsXHJcbiAgJ2FjY2Vzcy1jb250cm9sLWFsbG93LWhlYWRlcnMnOiAnY29udGVudC10eXBlLCBhY2NlcHQnLFxyXG4gICdhY2Nlc3MtY29udHJvbC1tYXgtYWdlJzogMTAsXHJcbiAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG59O1xyXG5cclxuZXhwb3J0cy5zZW5kUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSwgZGF0YSwgc3RhdHVzQ29kZSkge1xyXG4gIHN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlIHx8IDIwMDtcclxuICByZXNwb25zZS53cml0ZUhlYWQoc3RhdHVzQ29kZSwgaGVhZGVycyk7XHJcbiAgY29uc29sZS5sb2coZGF0YSlcclxuICByZXNwb25zZS5lbmQoSlNPTi5zdHJpbmdpZnkoZGF0YS5yZXN1bHRzKSk7XHJcbn1cclxuXHJcbmV4cG9ydHMuY29sbGVjdERhdGEgPSBmdW5jdGlvbihyZXF1ZXN0LCBjYWxsYmFjaykge1xyXG4gIHZhciBkYXRhID0gJyc7XHJcbiAgcmVxdWVzdC5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKXtcclxuICAgIGRhdGEgKz0gY2h1Y2s7XHJcbiAgfSk7XHJcbiAgcmVxdWVzdC5vbignZW5kJywgZnVuY3Rpb24oKXtcclxuICAgIGNhbGxiYWNrKEpTT04ucGFyc2UoZGF0YSkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBleHBvcnRzLnJlZGlyZWN0VG8gPSBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkge1xyXG4vLyAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnJlZGlyZWN0KVxyXG4vLyAgIHJldHVybiByZXNwb25zZS5yZWRpcmVjdCgnL2FwaS9wb3N0cycpO1xyXG4vLyB9XHJcblxyXG5leHBvcnRzLm1ha2VBY3Rpb25IYW5kbGVyID0gZnVuY3Rpb24oYWN0aW9uTWFwKSB7XHJcbiAgcmV0dXJuIGZ1bmN0aW9uIChyZXF1ZXN0LCByZXNwb25zZSkge1xyXG4gICAgdmFyIGFjdGlvbiA9IGFjdGlvbk1hcFtyZXF1ZXN0Lm1ldGhvZF07XHJcbiAgICBpZiAoYWN0aW9uKSB7XHJcbiAgICAgIGFjdGlvbihyZXF1ZXN0LCByZXNwb25zZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBleHBvcnRzLnNlbmRSZXNwb25zZShyZXNwb25zZSwgJycsIDQwNCk7XHJcbiAgICB9XHJcbiAgfTtcclxufTsiXX0=